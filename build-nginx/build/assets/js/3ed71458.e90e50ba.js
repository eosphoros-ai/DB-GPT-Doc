"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9964],{1058:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var o=t(4848),a=t(8453);const i={},r="Installation FAQ",l={id:"faq/install",title:"Installation FAQ",description:"Q1 (sqlite3.OperationalError) unable to open database file",source:"@site/docs/faq/install.md",sourceDirName:"faq",slug:"/faq/install",permalink:"/docs/latest/faq/install",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Data Analysis App Develop",permalink:"/docs/latest/cookbook/app/data_analysis_app_develop"},next:{title:"LLM USE FAQ",permalink:"/docs/latest/faq/llm"}},d={},c=[{value:"Q1: sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) unable to open database file",id:"q1-sqlalchemyexcoperationalerror-sqlite3operationalerror-unable-to-open-database-file",level:3},{value:"Q2: The model keeps getting killed.",id:"q2-the-model-keeps-getting-killed",level:3},{value:"Q3: How to access website on the public network",id:"q3-how-to-access-website-on-the-public-network",level:3},{value:"Q4: (Windows) execute <code>pip install -e .</code> error",id:"q4-windows-execute-pip-install--e--error",level:3},{value:"Q5: <code>Torch not compiled with CUDA enabled</code>",id:"q5-torch-not-compiled-with-cuda-enabled",level:3},{value:"Q6: <code>How to migrate meta table chat_history and connect_config from duckdb to sqlite</code>",id:"q6-how-to-migrate-meta-table-chat_history-and-connect_config-from-duckdb-to-sqlite",level:3},{value:"Q7: <code>How to migrate meta table chat_history and connect_config from duckdb to mysql</code>",id:"q7-how-to-migrate-meta-table-chat_history-and-connect_config-from-duckdb-to-mysql",level:3},{value:"Q8: <code>How to manage and migrate my database</code>",id:"q8-how-to-manage-and-migrate-my-database",level:3},{value:"Q9: <code>alembic.util.exc.CommandError: Target database is not up to date.</code>",id:"q9-alembicutilexccommanderror-target-database-is-not-up-to-date",level:3}];function s(e){const n={a:"a",code:"code",h1:"h1",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"installation-faq",children:"Installation FAQ"}),"\n",(0,o.jsx)(n.h3,{id:"q1-sqlalchemyexcoperationalerror-sqlite3operationalerror-unable-to-open-database-file",children:"Q1: sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) unable to open database file"}),"\n",(0,o.jsx)(n.p,{children:"make sure you pull latest code or create directory with mkdir pilot/data"}),"\n",(0,o.jsx)(n.h3,{id:"q2-the-model-keeps-getting-killed",children:"Q2: The model keeps getting killed."}),"\n",(0,o.jsx)(n.p,{children:"your GPU VRAM size is not enough, try replace your hardware or replace other llms."}),"\n",(0,o.jsx)(n.h3,{id:"q3-how-to-access-website-on-the-public-network",children:"Q3: How to access website on the public network"}),"\n",(0,o.jsxs)(n.p,{children:["You can try to use gradio's ",(0,o.jsx)(n.a,{href:"https://github.com/gradio-app/gradio/blob/main/gradio/networking.py",children:"network"})," to achieve."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"import secrets\nfrom gradio import networking\ntoken=secrets.token_urlsafe(32)\nlocal_port=5000\nurl = networking.setup_tunnel('0.0.0.0', local_port, token)\nprint(f'Public url: {url}')\ntime.sleep(60 * 60 * 24)\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Open ",(0,o.jsx)(n.code,{children:"url"})," with your browser to see the website."]}),"\n",(0,o.jsxs)(n.h3,{id:"q4-windows-execute-pip-install--e--error",children:["Q4: (Windows) execute ",(0,o.jsx)(n.code,{children:"pip install -e ."})," error"]}),"\n",(0,o.jsx)(n.p,{children:"The error log like the following:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"\xd7 python setup.py bdist_wheel did not run successfully.\n  \u2502 exit code: 1\n  \u2570\u2500> [11 lines of output]\n      running bdist_wheel\n      running build\n      running build_py\n      creating build\n      creating build\\lib.win-amd64-cpython-310\n      creating build\\lib.win-amd64-cpython-310\\cchardet\n      copying src\\cchardet\\version.py -> build\\lib.win-amd64-cpython-310\\cchardet\n      copying src\\cchardet\\__init__.py -> build\\lib.win-amd64-cpython-310\\cchardet\n      running build_ext\n      building 'cchardet._cchardet' extension\n      error: Microsoft Visual C++ 14.0 or greater is required. Get it with \"Microsoft C++ Build Tools\": https://visualstudio.microsoft.com/visual-cpp-build-tools/\n      [end of output]\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Download and install ",(0,o.jsx)(n.code,{children:"Microsoft C++ Build Tools"})," from ",(0,o.jsx)(n.a,{href:"https://visualstudio.microsoft.com/visual-cpp-build-tools/",children:"visual-cpp-build-tools"})]}),"\n",(0,o.jsxs)(n.h3,{id:"q5-torch-not-compiled-with-cuda-enabled",children:["Q5: ",(0,o.jsx)(n.code,{children:"Torch not compiled with CUDA enabled"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'2023-08-19 16:24:30 | ERROR | stderr |     raise AssertionError("Torch not compiled with CUDA enabled")\n2023-08-19 16:24:30 | ERROR | stderr | AssertionError: Torch not compiled with CUDA enabled\n'})}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Install ",(0,o.jsx)(n.a,{href:"https://developer.nvidia.com/cuda-toolkit-archive",children:"CUDA Toolkit"})]}),"\n",(0,o.jsxs)(n.li,{children:["Reinstall PyTorch ",(0,o.jsx)(n.a,{href:"https://pytorch.org/get-started/locally/#start-locally",children:"start-locally"})," with CUDA support."]}),"\n"]}),"\n",(0,o.jsxs)(n.h3,{id:"q6-how-to-migrate-meta-table-chat_history-and-connect_config-from-duckdb-to-sqlite",children:["Q6: ",(0,o.jsx)(n.code,{children:"How to migrate meta table chat_history and connect_config from duckdb to sqlite"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-commandline",children:" python docker/examples/metadata/duckdb2sqlite.py\n"})}),"\n",(0,o.jsxs)(n.h3,{id:"q7-how-to-migrate-meta-table-chat_history-and-connect_config-from-duckdb-to-mysql",children:["Q7: ",(0,o.jsx)(n.code,{children:"How to migrate meta table chat_history and connect_config from duckdb to mysql"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-commandline",children:"1. update your mysql username and password in docker/examples/metadata/duckdb2mysql.py\n2.  python docker/examples/metadata/duckdb2mysql.py\n"})}),"\n",(0,o.jsxs)(n.h3,{id:"q8-how-to-manage-and-migrate-my-database",children:["Q8: ",(0,o.jsx)(n.code,{children:"How to manage and migrate my database"})]}),"\n",(0,o.jsxs)(n.p,{children:["You can use the command of ",(0,o.jsx)(n.code,{children:"dbgpt db migration"})," to manage and migrate your database."]}),"\n",(0,o.jsx)(n.p,{children:"See the following command for details."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-commandline",children:"dbgpt db migration --help\n"})}),"\n",(0,o.jsxs)(n.p,{children:["First, you need to create a migration script(just once unless you clean it).\nThis command with create a ",(0,o.jsx)(n.code,{children:"alembic"})," directory in your ",(0,o.jsx)(n.code,{children:"pilot/meta_data"})," directory and a initial migration script in it."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-commandline",children:"dbgpt db migration init\n"})}),"\n",(0,o.jsx)(n.p,{children:"Then you can upgrade your database with the following command."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-commandline",children:"dbgpt db migration upgrade\n"})}),"\n",(0,o.jsx)(n.p,{children:"Every time you change the model or pull the latest code from DB-GPT repository, you need to create a new migration script."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-commandline",children:'\ndbgpt db migration migrate -m "your message"\n'})}),"\n",(0,o.jsx)(n.p,{children:"Then you can upgrade your database with the following command."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-commandline",children:"dbgpt db migration upgrade\n"})}),"\n",(0,o.jsxs)(n.h3,{id:"q9-alembicutilexccommanderror-target-database-is-not-up-to-date",children:["Q9: ",(0,o.jsx)(n.code,{children:"alembic.util.exc.CommandError: Target database is not up to date."})]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Solution 1:"})}),"\n",(0,o.jsx)(n.p,{children:"Run the following command to upgrade the database."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-commandline",children:"dbgpt db migration upgrade\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Solution 2:"})}),"\n",(0,o.jsx)(n.p,{children:"Run the following command to clean the migration script and migration history."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-commandline",children:"dbgpt db migration clean -y\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Solution 3:"})}),"\n",(0,o.jsx)(n.p,{children:"If you have already run the above command, but the error still exists,\nyou can try the following command to clean the migration script, migration history and your data.\nwarning: This command will delete all your data!!! Please use it with caution."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-commandline",children:"dbgpt db migration clean --drop_all_tables -y --confirm_drop_all_tables\n"})}),"\n",(0,o.jsx)(n.p,{children:"or"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-commandline",children:"rm -rf pilot/meta_data/alembic/versions/*\nrm -rf pilot/meta_data/alembic/dbgpt.db\n"})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(s,{...e})}):s(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>l});var o=t(6540);const a={},i=o.createContext(a);function r(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);