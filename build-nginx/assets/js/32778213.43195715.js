"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2360],{2158:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>p,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>c,toc:()=>d});var t=r(4848),a=r(8453),l=r(1470),s=r(9365);const i={},o="App",c={id:"api/app",title:"App",description:"Get started with the App API",source:"@site/docs/api/app.md",sourceDirName:"api",slug:"/api/app",permalink:"/docs/latest/api/app",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Chat",permalink:"/docs/latest/api/chat"},next:{title:"Flow",permalink:"/docs/latest/api/flow"}},p={},d=[{value:"Examples",id:"examples",level:3},{value:"Stream Chat App",id:"stream-chat-app",level:3},{value:"Chat Completion Stream Response",id:"chat-completion-stream-response",level:3},{value:"Get App",id:"get-app",level:3},{value:"Query Parameters",id:"query-parameters",level:4},{value:"Response body",id:"response-body",level:4},{value:"List App",id:"list-app",level:3},{value:"Response body",id:"response-body-1",level:4},{value:"The App Model",id:"the-app-model",level:3},{value:"The App Detail Model",id:"the-app-detail-model",level:3}];function h(e){const n={code:"code",h1:"h1",h3:"h3",h4:"h4",hr:"hr",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"app",children:"App"}),"\n",(0,t.jsx)(n.p,{children:"Get started with the App API"}),"\n",(0,t.jsx)(n.h1,{id:"chat-app",children:"Chat App"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"POST /api/v2/chat/completions\n"})}),"\n",(0,t.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n","\n","\n",(0,t.jsx)(n.h3,{id:"stream-chat-app",children:"Stream Chat App"}),"\n",(0,t.jsxs)(l.A,{defaultValue:"python",groupId:"chat",values:[{label:"Curl",value:"curl"},{label:"Python",value:"python"}],children:[(0,t.jsx)(s.A,{value:"curl",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:' DBGPT_API_KEY=dbgpt\n APP_ID={YOUR_APP_ID}\n\n curl -X POST "http://localhost:5000/api/v2/chat/completions" \\\n    -H "Authorization: Bearer $DBGPT_API_KEY" \\\n    -H "accept: application/json" \\\n    -H "Content-Type: application/json" \\\n    -d "{\\"messages\\":\\"Hello\\",\\"model\\":\\"chatgpt_proxyllm\\", \\"chat_mode\\": \\"chat_app\\", \\"chat_param\\": \\"$APP_ID\\"}"\n\n'})})}),(0,t.jsx)(s.A,{value:"python",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from dbgpt.client import Client\n\nDBGPT_API_KEY = "dbgpt"\nAPP_ID="{YOUR_APP_ID}"\n\nclient = Client(api_key=DBGPT_API_KEY)\n\nasync for data in client.chat_stream(\n    messages="Introduce AWEL", \n    model="chatgpt_proxyllm", \n    chat_mode="chat_app", \n    chat_param=APP_ID\n):\n    print(data)\n\n'})})})]}),"\n",(0,t.jsx)(n.h3,{id:"chat-completion-stream-response",children:"Chat Completion Stream Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-commandline",children:'data: {"id": "109bfc28-fe87-452c-8e1f-d4fe43283b7d", "created": 1710919480, "model": "chatgpt_proxyllm", "choices": [{"index": 0, "delta": {"role": "assistant", "content": "```agent-plans\\n[{\\"name\\": \\"Introduce Awel\\", \\"num\\": 2, \\"status\\": \\"complete\\", \\"agent\\": \\"Human\\", \\"markdown\\": \\"```agent-messages\\\\n[{\\\\\\"sender\\\\\\": \\\\\\"Summarizer\\\\\\", \\\\\\"receiver\\\\\\": \\\\\\"Human\\\\\\", \\\\\\"model\\\\\\": \\\\\\"chatgpt_proxyllm\\\\\\", \\\\\\"markdown\\\\\\": \\\\\\"Agentic Workflow Expression Language (AWEL) is a specialized language designed for developing large model applications with intelligent agent workflows. It offers flexibility and functionality, allowing developers to focus on business logic for LLMs applications without getting bogged down in model and environment details. AWEL uses a layered API design architecture, making it easier to work with. You can find examples and source code to get started with AWEL, and it supports various operators and environments. AWEL is a powerful tool for building native data applications through workflows and agents.\\"}]\\n```"}}]}\n\ndata: [DONE]\n'})}),"\n",(0,t.jsx)(n.h3,{id:"get-app",children:"Get App"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"GET /api/v2/serve/apps/{app_id}\n"})}),"\n",(0,t.jsxs)(l.A,{defaultValue:"curl_get_app",groupId:"chat1",values:[{label:"Curl",value:"curl_get_app"},{label:"Python",value:"python_get_app"}],children:[(0,t.jsx)(s.A,{value:"curl_get_app",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'DBGPT_API_KEY=dbgpt\nAPP_ID={YOUR_APP_ID}\ncurl -X GET "http://localhost:5000/api/v2/serve/apps/$APP_ID" -H "Authorization: Bearer $DBGPT_API_KEY"\n'})})}),(0,t.jsx)(s.A,{value:"python_get_app",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from dbgpt.client import Client\nfrom dbgpt.client.app import get_app\n\nDBGPT_API_KEY = "dbgpt"\napp_id = "{your_app_id}"\n\nclient = Client(api_key=DBGPT_API_KEY)\nres = await get_app(client=client, app_id=app_id)\n\n'})})})]}),"\n",(0,t.jsx)(n.h4,{id:"query-parameters",children:"Query Parameters"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("b",{children:"app_id"}),"\n",(0,t.jsx)("font",{color:"gray",children:" string "}),"\n",(0,t.jsx)("font",{color:"red",children:" Required "}),"\n",(0,t.jsx)(n.p,{children:"app id"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h4,{id:"response-body",children:"Response body"}),"\n",(0,t.jsxs)(n.p,{children:["Return ",(0,t.jsx)("a",{href:"#the-app-object",children:"App Object"})]}),"\n",(0,t.jsx)(n.h3,{id:"list-app",children:"List App"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"GET /api/v2/serve/apps\n"})}),"\n",(0,t.jsxs)(l.A,{defaultValue:"curl_list_app",groupId:"chat1",values:[{label:"Curl",value:"curl_list_app"},{label:"Python",value:"python_list_app"}],children:[(0,t.jsx)(s.A,{value:"curl_list_app",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"DBGPT_API_KEY=dbgpt\n\ncurl -X GET 'http://localhost:5000/api/v2/serve/apps' -H \"Authorization: Bearer $DBGPT_API_KEY\"\n"})})}),(0,t.jsx)(s.A,{value:"python_list_app",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from dbgpt.client import Client\nfrom dbgpt.client.app import list_app\n\nDBGPT_API_KEY = "dbgpt"\napp_id = "{your_app_id}"\n\nclient = Client(api_key=DBGPT_API_KEY)\nres = await list_app(client=client)\n\n'})})})]}),"\n",(0,t.jsx)(n.h4,{id:"response-body-1",children:"Response body"}),"\n",(0,t.jsxs)(n.p,{children:["Return ",(0,t.jsx)("a",{href:"#the-app-object",children:"App Object"})," List"]}),"\n",(0,t.jsx)(n.h3,{id:"the-app-model",children:"The App Model"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("b",{children:"id"}),"\n",(0,t.jsx)("font",{color:"gray",children:" string "}),"\n",(0,t.jsx)(n.p,{children:"space id"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("b",{children:"app_code"}),"\n",(0,t.jsx)("font",{color:"gray",children:" string "}),"\n",(0,t.jsx)(n.p,{children:"app code"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("b",{children:"app_name"}),"\n",(0,t.jsx)("font",{color:"gray",children:" string "}),"\n",(0,t.jsx)(n.p,{children:"app name"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("b",{children:"app_describe"}),"\n",(0,t.jsx)("font",{color:"gray",children:" string "}),"\n",(0,t.jsx)(n.p,{children:"app describe"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("b",{children:"team_mode"}),"\n",(0,t.jsx)("font",{color:"gray",children:" string "}),"\n",(0,t.jsx)(n.p,{children:"team mode"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("b",{children:"language"}),"\n",(0,t.jsx)("font",{color:"gray",children:" string "}),"\n",(0,t.jsx)(n.p,{children:"language"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("b",{children:"team_context"}),"\n",(0,t.jsx)("font",{color:"gray",children:" string "}),"\n",(0,t.jsx)(n.p,{children:"team context"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("b",{children:"user_code"}),"\n",(0,t.jsx)("font",{color:"gray",children:" string "}),"\n",(0,t.jsx)(n.p,{children:"user code"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("b",{children:"sys_code"}),"\n",(0,t.jsx)("font",{color:"gray",children:" string "}),"\n",(0,t.jsx)(n.p,{children:"sys code"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("b",{children:"is_collected"}),"\n",(0,t.jsx)("font",{color:"gray",children:" string "}),"\n",(0,t.jsx)(n.p,{children:"is collected"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("b",{children:"icon"}),"\n",(0,t.jsx)("font",{color:"gray",children:" string "}),"\n",(0,t.jsx)(n.p,{children:"icon"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("b",{children:"created_at"}),"\n",(0,t.jsx)("font",{color:"gray",children:" string "}),"\n",(0,t.jsx)(n.p,{children:"created at"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("b",{children:"updated_at"}),"\n",(0,t.jsx)("font",{color:"gray",children:" string "}),"\n",(0,t.jsx)(n.p,{children:"updated at"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("b",{children:"details"}),"\n",(0,t.jsx)("font",{color:"gray",children:" string "}),"\n",(0,t.jsx)(n.p,{children:"app details List[AppDetailModel]"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"the-app-detail-model",children:"The App Detail Model"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("b",{children:"app_code"}),"\n",(0,t.jsx)("font",{color:"gray",children:" string "}),"\n",(0,t.jsx)(n.p,{children:"app code"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("b",{children:"app_name"}),"\n",(0,t.jsx)("font",{color:"gray",children:" string "}),"\n",(0,t.jsx)(n.p,{children:"app name"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("b",{children:"agent_name"}),"\n",(0,t.jsx)("font",{color:"gray",children:" string "}),"\n",(0,t.jsx)(n.p,{children:"agent name"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("b",{children:"node_id"}),"\n",(0,t.jsx)("font",{color:"gray",children:" string "}),"\n",(0,t.jsx)(n.p,{children:"node id"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("b",{children:"resources"}),"\n",(0,t.jsx)("font",{color:"gray",children:" string "}),"\n",(0,t.jsx)(n.p,{children:"resources"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("b",{children:"prompt_template"}),"\n",(0,t.jsx)("font",{color:"gray",children:" string "}),"\n",(0,t.jsx)(n.p,{children:"prompt template"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("b",{children:"llm_strategy"}),"\n",(0,t.jsx)("font",{color:"gray",children:" string "}),"\n",(0,t.jsx)(n.p,{children:"llm strategy"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("b",{children:"llm_strategy_value"}),"\n",(0,t.jsx)("font",{color:"gray",children:" string "}),"\n",(0,t.jsx)(n.p,{children:"llm strategy value"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("b",{children:"created_at"}),"\n",(0,t.jsx)("font",{color:"gray",children:" string "}),"\n",(0,t.jsx)(n.p,{children:"created at"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("b",{children:"updated_at"}),"\n",(0,t.jsx)("font",{color:"gray",children:" string "}),"\n",(0,t.jsx)(n.p,{children:"updated at"}),"\n",(0,t.jsx)(n.hr,{})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},9365:(e,n,r)=>{r.d(n,{A:()=>s});r(6540);var t=r(53);const a={tabItem:"tabItem_Ymn6"};var l=r(4848);function s(e){let{children:n,hidden:r,className:s}=e;return(0,l.jsx)("div",{role:"tabpanel",className:(0,t.A)(a.tabItem,s),hidden:r,children:n})}},1470:(e,n,r)=>{r.d(n,{A:()=>y});var t=r(6540),a=r(53),l=r(3104),s=r(6347),i=r(205),o=r(7485),c=r(1682),p=r(9466);function d(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:r}=e;return(0,t.useMemo)((()=>{const e=n??function(e){return d(e).map((e=>{let{props:{value:n,label:r,attributes:t,default:a}}=e;return{value:n,label:r,attributes:t,default:a}}))}(r);return function(e){const n=(0,c.X)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,r])}function u(e){let{value:n,tabValues:r}=e;return r.some((e=>e.value===n))}function x(e){let{queryString:n=!1,groupId:r}=e;const a=(0,s.W6)(),l=function(e){let{queryString:n=!1,groupId:r}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:n,groupId:r});return[(0,o.aZ)(l),(0,t.useCallback)((e=>{if(!l)return;const n=new URLSearchParams(a.location.search);n.set(l,e),a.replace({...a.location,search:n.toString()})}),[l,a])]}function j(e){const{defaultValue:n,queryString:r=!1,groupId:a}=e,l=h(e),[s,o]=(0,t.useState)((()=>function(e){let{defaultValue:n,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!u({value:n,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${r.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const t=r.find((e=>e.default))??r[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:l}))),[c,d]=x({queryString:r,groupId:a}),[j,g]=function(e){let{groupId:n}=e;const r=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,l]=(0,p.Dv)(r);return[a,(0,t.useCallback)((e=>{r&&l.set(e)}),[r,l])]}({groupId:a}),m=(()=>{const e=c??j;return u({value:e,tabValues:l})?e:null})();(0,i.A)((()=>{m&&o(m)}),[m]);return{selectedValue:s,selectValue:(0,t.useCallback)((e=>{if(!u({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);o(e),d(e),g(e)}),[d,g,l]),tabValues:l}}var g=r(2303);const m={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=r(4848);function f(e){let{className:n,block:r,selectedValue:t,selectValue:s,tabValues:i}=e;const o=[],{blockElementScrollPositionUntilNextRender:c}=(0,l.a_)(),p=e=>{const n=e.currentTarget,r=o.indexOf(n),a=i[r].value;a!==t&&(c(n),s(a))},d=e=>{let n=null;switch(e.key){case"Enter":p(e);break;case"ArrowRight":{const r=o.indexOf(e.currentTarget)+1;n=o[r]??o[0];break}case"ArrowLeft":{const r=o.indexOf(e.currentTarget)-1;n=o[r]??o[o.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":r},n),children:i.map((e=>{let{value:n,label:r,attributes:l}=e;return(0,b.jsx)("li",{role:"tab",tabIndex:t===n?0:-1,"aria-selected":t===n,ref:e=>o.push(e),onKeyDown:d,onClick:p,...l,className:(0,a.A)("tabs__item",m.tabItem,l?.className,{"tabs__item--active":t===n}),children:r??n},n)}))})}function _(e){let{lazy:n,children:r,selectedValue:a}=e;const l=(Array.isArray(r)?r:[r]).filter(Boolean);if(n){const e=l.find((e=>e.props.value===a));return e?(0,t.cloneElement)(e,{className:"margin-top--md"}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:l.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==a})))})}function v(e){const n=j(e);return(0,b.jsxs)("div",{className:(0,a.A)("tabs-container",m.tabList),children:[(0,b.jsx)(f,{...e,...n}),(0,b.jsx)(_,{...e,...n})]})}function y(e){const n=(0,g.A)();return(0,b.jsx)(v,{...e,children:d(e.children)},String(n))}},8453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>i});var t=r(6540);const a={},l=t.createContext(a);function s(e){const n=t.useContext(l);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);